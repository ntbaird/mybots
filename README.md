# Finalized Evolution of Arm-Bots
Final Project for CS 396 - Artificial Life

![](https://github.com/ntbaird/mybots/blob/Final/data/7egcng.gif)

# VIDEO SUBMISSION
https://youtu.be/1pdQYy7k1yM

I hope you have fun and learn something while watching it!

There's a B-reel in the credits if you want to see some of the failed/buggy robots that didn't make the cut.

# THE CODE
TO RUN THE SIMULATION:

First: Check out constants.py to make sure you are satisfied with the population size and number of generations!
Now you have two options, running the evolution from the beginning, or viewing the final robots.

</br>
TO VIEW THE FINAL ROBOTS:

In your Python terminal of choice, run simulate.py with the following arguments:

python simulate.py GUI (generation number) (seed number)

You can find these values inside the "brains" or "bodies" folder (#seedbody#)

</br>
ALTERNATIVELY, you may run the evolution from the beginning

This may look like the following:

python search.py
or python3 search.py

</br>
If any problems arise with inaccessible fitness files or locked body.urdf, please try running the command again.

The code took roughly 3 hours on my machine for 50k simulations, so please plan accordingly or re-pull the brains & bodies for the final creatures of my latest run.

# Inspiration/Goal
Karl Sims' Evolved Creatures in competition: https://www.youtube.com/watch?v=mA8z0GndiYI

![sims 1](https://user-images.githubusercontent.com/91085742/220190536-c142535f-b737-46b3-b837-d8c112a1107e.jpg)
![sims 2](https://user-images.githubusercontent.com/91085742/220190493-56745a34-700f-4147-a13d-ff79b7fda5b2.jpg)
![sims 3](https://user-images.githubusercontent.com/91085742/220190503-114b7c2a-8aa6-4c5a-97ee-ce1cfe636143.jpg)

Additional inspiration: PokÃ©mon's Geodude

![image](https://user-images.githubusercontent.com/91085742/220191334-90d7a5a9-97ee-4478-b3b2-3ea1abd71ceb.png)

Generated bots:

![image](https://user-images.githubusercontent.com/91085742/225123274-e8b12487-dfc8-4379-8842-3a98066dd0d3.png)
![image](https://user-images.githubusercontent.com/91085742/225123345-e1ad12fb-c296-4459-8816-03f2f3cef94e.png)

Evolved versions:

![image](https://user-images.githubusercontent.com/91085742/225123448-a378d097-f44a-4cbd-8a26-2b65ba8c0f11.png)
![image](https://user-images.githubusercontent.com/91085742/225123532-4613d435-6454-4217-8ace-82cafd171b3f.png)
![image](https://user-images.githubusercontent.com/91085742/225123588-558c0996-b6f2-4657-beaf-48357cdba604.png)


# Method
These bots are generated by first starting with a head and torso, then randomly extending the arms out on either side of the torso in the X, Y, and Z directions (up to a "Maximum Segment" length specified in the constants file). These segments are sized randomly, but symmetrically across the body of the creature. This can also be mirrored to produce a true quadruped (that would most likely not fall over!). Occasionally the robots will evolve to put their arms below the ground, which causes physics issues. This is because a default height of 5 is set, which can be too low for robots that generate purely in the Z-direction. Additionally, there is a bug in the generation of the first arm on the torso that can cause the arms to be visibly detached from the torso.
![image](https://user-images.githubusercontent.com/91085742/225072617-509307e2-4c9c-4cbb-8053-100d2dcb8d88.png)

After creation, these robots are then evolved to travel as far as possible in the positive X and Y directions. A parallel hill climber algorithm allows for a population of 10 of these robots to travel at the same time. Please see the following section for a more in-depth explanation of how the hill climber works.

At the end of every generation, the best fitness of the population is recorded for the purposes of the fitness progression, shown in the "Fitness Curves" section.

# How it REALLY Works

We start in search.py, which combs through each of the 10 seeds for evolution and the best robot from that evolution. The parallel hill climber begins creating the bodies for the population size, and runs the simulation of each robot in the population. Then, the hill climber spawns a child, mutates it, and simulates it to compare its fitness against the parent. This is where selection occurs. If the child is deemed more fit than the parent for the task at hand, we proceed with the child as our new parent to mutate from. The process of spawning, mutating, simulating, and selecting repeats over 500 generations for each robot in the population.

Unfortunately, the most recent run (with files included) shows subpar robots that resulted from evolution. The code was run three times (> 9 hours of simulations!); robots from these other runs are included in the video attached at the top.

# Fitness Curves
![Evolution Graph](https://user-images.githubusercontent.com/91085742/225068375-1ca74090-8592-433e-ae4e-117137231b1b.jpg)

The above graph shows the TEN seeded versions of these robots over 500 generations with a population size of 10 per generation. (That's 50k simulations!!)

# Results

As you can see from the videos, these creatures with symmetry usually evolved to move in some wavelike pattern: when one arm goes down, the other comes up to hop (almost "pronk!") its way along. Future experimentations may test symmetry vs. asymmetry to see if there's a fitness advantage in symmetry at all! While evolution rarely got "stuck," it would sometimes figure out how to exploit the physics engine since each robot was generated at a static height, and not based on the height of the robot. These robots also lack true randomness in the sense that their limbs can only extrude in 3 of the possible 6 +- XYZ axes. Additionally, I did not utilize more complex versions of joints in order to force creative locomotive patterns from the robots. One could further analyze each individual seed's performance as time progresses, but due to the overall runtime of this project I decided to not purse that path. If you are curious about the robot in the GIF and the first half of the video, check out seed 2!

# Credits
 - r/ludobots for their incredibly detailed tutorial to introduce pyrosim and most features you see here. https://www.reddit.com/r/ludobots/
 - Northwestern University's Artificial Life Seminar
 - Check out my horrific failures/buggy robots here! https://youtu.be/f5Mdh9cux-M
